---
title: "_BOMRang_: Fetch Australian Government Bureau of Meteorology (BOM) Data"
author: "Adam H Sparks"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{BOMRang}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

## Introduction

_BOMRang_ provides functions for interacting with [Australian Bureau of Meteorology (BOM) Weather Data Services](http://www.bom.gov.au/catalogue/data-feeds.shtml) forecasts. BOM serves forecasts as XML files.
This package fetches the forecast, parses it and returns a tidy dataframe for use in R.

## Using _BOMRang_

Two functions are provided by _BOMRang_, `get_forecast()` creates a data frame of the daily forecast from BOM. A second
function, `update_locations()`, updates an internal database of forecast locations distributed with the package.

### Using `get_forecast()`

Most people will only use `get_forecast()` to fetch BOM daily weather forecasts.
This function only takes one parameter, `state`. The `state` parameter allows the user to select the forecast for just one state or a national forecast. States are specified using the official postal codes, 

**ACT** - Australian Capital Territory  
**NSW** - New South Wales  
**NT** - Northern Territory  
**QLD** - Queensland  
**SA** - South Australia  
**TAS** - Tasmania  
**VIC** - Tasmania  
**WA** - Western Australia  
**AUS** - Australia, returns forecast for all states  

### Results

The function, `get_forecast()` will return a Tibble of the weather forecast for the daily forecast with the following fields.

**aac** - AMOC Area Code, e.g. WA_MW008, a unique identifier for each location  
**date** - Date (YYYY-MM-DD)  
**max_temp** - Maximum forecasted temperature (degrees Celsius)  
**min_temp** - Minimum forecasted temperature (degrees Celsius)  
**lower_prcp_limit** - Lower forecasted precipitation limit (millimetres)  
**upper_prcp_limit** - Upper forecasted precipitation limit (millimetres)  
**precis** - Pr√©cis forecast (a short summary, less than 30 characters)  
**prob_prcp** - Probability of precipitation (percent)  
**location** - Named location for forecast  
**state** - State name (postal code abbreviation)  
**lon** - Longitude of named location (decimal Degrees)  
**lat** - Latitude of named location (decimal Degrees)  
**elev** - Elevation of named location (metres)  

### Example

Following is an example fetching the forecast for Queensland.

```{r, eval=TRUE}
library("BOMRang")

QLD_forecast <- get_forecast(state = "QLD")
QLD_forecast
```


### Using `update_locations()`

This function downloads the latest forecast locations from the BOM server and updates _BOMRang_'s internal database of forecast locations.  There is no need to use this unless you know that a forecast location exists in a more current version of the BOM forecast location database that is not available in the database distributed with _BOMRang_. This database is
distributed with the package to make the process faster when fetching the forecast.

```{r, eval=FALSE}
update_locations()
```

## References

[Australian Bureau of Meteorology (BOM) Weather Data Services](http://www.bom.gov.au/catalogue/data-feeds.shtml)
