---
title: "_bomrang_: Fetch Australian Government Bureau of Meteorology (BOM) Data"
author: "Adam H Sparks"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{bomrang}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

## Introduction

_bomrang_ provides functions for interacting with [Australian Bureau of Meteorology (BOM) Weather Data Services](http://www.bom.gov.au/catalogue/data-feeds.shtml) forecasts. BOM serves forecasts as XML files.
This package fetches the forecast, parses it and returns a tidy dataframe for use in R.

## Using _bomrang_

Three functions are provided by _bomrang_. The two main functions are `get_forecast()`, which creates a data frame of the daily forecast from BOM, and `get_bulletin()`, which creates a data frame of agriculture bulletin information. The third function, `update_locations()`, updates an internal database of forecast locations distributed with the package.

### Using `get_forecast()`

This function only takes one parameter, `state`. The `state` parameter allows the user to select the forecast for just one state or a national forecast. States are specified using the official postal codes, 

**ACT** - Australian Capital Territory  
**NSW** - New South Wales  
**NT** - Northern Territory  
**QLD** - Queensland  
**SA** - South Australia  
**TAS** - Tasmania  
**VIC** - Tasmania  
**WA** - Western Australia  
**AUS** - Australia, returns forecast for all states  

### Results

The function, `get_forecast()` will return a Tibble of the weather forecast for the daily forecast with the following fields,

**aac** - AMOC Area Code, e.g. WA_MW008, a unique identifier for each location  
**start_time_local** - Start of forecast date and time in local TZ  
**end_time_local** - End of forecast date and time in local TZ  
**start_time_utc** - Start of forecast date and time in UTC  
**end_time_utc** - End of forecast date and time in UTC  
**max_temp** - Maximum forecasted temperature (degrees Celsius)  
**min_temp** - Minimum forecasted temperature (degrees Celsius)  
**lower_prcp_limit** - Lower forecasted precipitation limit (millimetres)  
**upper_prcp_limit** - Upper forecasted precipitation limit (millimetres)  
**precis** - Pr√©cis forecast (a short summary, less than 30 characters)  
**prob_prcp** - Probability of precipitation (percent)  
**location** - Named location for forecast  
**state** - State name (postal code abbreviation)  
**lon** - Longitude of named location (decimal degrees)  
**lat** - Latitude of named location (decimal degrees)  
**elev** - Elevation of named location (metres)  

### Examples

Following is an example fetching the forecast for Queensland.

```{r, eval=TRUE}
library("bomrang")

QLD_forecast <- get_forecast(state = "QLD")
QLD_forecast
```

### Using `get_bulletin()`

This function only takes one parameter, `state`. The `state` parameter allows the user to select the bulletin for just one state or a national forecast. States are specified using the official postal codes, 

**ACT** - Australian Capital Territory  
**NSW** - New South Wales  
**NT** - Northern Territory  
**QLD** - Queensland  
**SA** - South Australia  
**TAS** - Tasmania  
**VIC** - Tasmania  
**WA** - Western Australia  
**AUS** - Australia, returns forecast for all states  

### Results

The function, `get_bulletin()` will return a Tibble of the agriculture bulletin for Queensland with the following fields,

**obs-time-utc** - Observation time (Time in UTC)  
**time-zone** - Time zone for observation  
**site** - Unique BOM identifier for each station  
**name** - BOM station name  
**r** - Rain to 9am (millimetres). \strong{Trace will be reported as 0.01  
**tn** - Minimum temperature (degrees Celsius)  
**tx** - Maximum temperature (degrees Celsius)  
**twd** - Wetbulb depression (degress Celsius)  
**ev** - Evaporation (millimetres)  
**tg** - Terrestrial minimum temperature (degress Celsius)  
**sn** - Sunshine (Hours)  
**t5** - 5cm soil temperature (Celsius)  
**t10** - 10cm soil temperature (Celsius)  
**t20** - 20cm soil temperature (Celsius)  
**t50** - 50cm soil temperature (Celsius)  
**t1m** - 1m soil temperature (Celsius)  
**wr** - Wind run (kilometres)  
**state** - State name (postal code abbreviation)  
**lat** - Latitude (decimal degrees)  
**lon** - Longitude (decimal degrees)  

```{r, eval=TRUE}
library("bomrang")

QLD_bulletin <- get_bulletin(state = "QLD")
QLD_bulletin
```

### Using `update_locations()`

This function downloads the latest precis forecast locations from the BOM server and updates _bomrang_'s internal database of forecast locations.  There is no need to use this unless you know that a forecast location exists in a more current version of the BOM forecast location database that is not available in the database distributed with _bomrang_. This database is distributed with the package to make the process faster when fetching the forecast.

```{r, eval=FALSE}
update_locations()
```

## References

[Australian Bureau of Meteorology (BOM) Weather Data Services](http://www.bom.gov.au/catalogue/data-feeds.shtml)
