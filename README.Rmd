---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

# _bomrang_: Fetch Australian Government Bureau of Meteorology (BOM) Data

[![Travis-CI Build Status](https://travis-ci.org/ToowoombaTrio/bomrang.svg?branch=master)](https://travis-ci.org/ToowoombaTrio/bomrang)
[![AppVeyor Build Status](https://ci.appveyor.com/api/projects/status/github/ToowoombaTrio/bomrang?branch=master&svg=true)](https://ci.appveyor.com/project/ToowoombaTrio/bomrang)
[![Coverage Status](https://img.shields.io/codecov/c/github/ToowoombaTrio/bomrang/master.svg)](https://codecov.io/github/ToowoombaTrio/bomrang?branch=master)
[![Last-changedate](https://img.shields.io/badge/last%20change-`r gsub('-', '--', Sys.Date())`-brightgreen.svg)](https://github.com/toowoombatrio/bomrang/commits/master) 
[![minimal R version](https://img.shields.io/badge/R%3E%3D-`r as.character(getRversion())`-brightgreen.svg)](https://cran.r-project.org/)
[![Licence](https://img.shields.io/github/license/mashape/apistatus.svg)](http://choosealicense.com/licenses/mit/) 
[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.598301.svg)](https://doi.org/10.5281/zenodo.598301)

Provides functions to interface with Australian Government Bureau of Meteorology (BOM) data, fetching data and returning a tidy data frame of précis forecasts, current weather data from stations or ag information bulletins.

Credit for the name, _bomrang_, goes to [Di Cook](http://dicook.github.io), who suggested it attending the rOpenSci AUUnconf in Brisbane, 2016, when seeing the [vignette](https://github.com/saundersk1/auunconf16/blob/master/Vignette_BoM.pdf) that we had assembled during the Unconf.

## Quick start

```{r, eval=FALSE}
if (!require("devtools")) {
  install.packages("devtools", repos = "http://cran.rstudio.com/") 
  library("devtools")
}

devtools::install_github("toowoombatrio/bomrang")
```

## Using _bomrang_

The main functionality of _bomrang_ is provided through three functions, `get_precis_forecast()`, which retrieves the précis (short) forecast; `get_current_weather()`, which fetches the current weather from a given station; and `get_ag_bulletin()`, which retrieves the agriculture bulletin. 

### Using `get_precis_forecast()`

This function only takes one argument, `state`. States or territories are specified using the official postal codes.

* **ACT** - Australian Capital Territory  
* **NSW** - New South Wales  
* **NT** - Northern Territory  
* **QLD** - Queensland  
* **SA** - South Australia  
* **TAS** - Tasmania  
* **VIC** - Victoria  
* **WA** - Western Australia  
* **AUS** - Australia, returns national forecast including all states/territories.

#### Results
The function `get_precis_forecast()` will return a tidy data frame of BOM data for
the requested state(s) or territory.  For a complete listing of the fields in
the data frame see the `Précis Forecast Fields` vignette.

#### Example

Following is an example fetching the précis forecast for Queensland.

```{r, eval=TRUE}
library("bomrang")

QLD_forecast <- get_precis_forecast(state = "QLD")
head(QLD_forecast)
```

### Using `get_ag_bulletin()`

This function only takes one argument, `state`. The `state` parameter allows the user to select the bulletin for just one state or a national bulletin. States or territories are specified using the official postal codes.

* **NSW** - New South Wales  
* **NT** - Northern Territory  
* **QLD** - Queensland  
* **SA** - South Australia  
* **TAS** - Tasmania  
* **VIC** - Victoria  
* **WA** - Western Australia  
* **AUS** - Australia, returns bulletin for all states/territories.

#### Results
The function `get_ag_bulletin()` will return a tidy data frame of BOM data for
the requested state(s) or territory.  For a complete listing of the fields in
the data frame see the `Ag Bulletin Fields` vignette.

#### Example

Following is an example fetching the ag bulletin for Queensland.

```{r, eval=TRUE}
library("bomrang")

QLD_bulletin <- get_ag_bulletin(state = "QLD")
head(QLD_bulletin)
```

### Using `get_current_weather()`
Returns the latest 72 hours weather observations for a station.

This function accepts four arguments:

* `station_name`, The name of the weather station. Fuzzy string matching via `base::agrep` is done.

* `latlon`, A length-2 numeric vector. When given instead of station_name, the nearest station (in this package) is used, with a message indicating the nearest such station. (See also `sweep_for_stations()`.) Ignored if used in combination with `station_name`, with a warning.

* `raw` Logical. Do not convert the columns data.table to the appropriate classes. (FALSE by default.)

* `emit_latlon_msg` Logical. If `TRUE` (the default), and `latlon` is selected, a message is emitted before the table is returned indicating which station was actually used (i.e. which station was found to be nearest to the given coordinate).

#### Results

The function, `get_current_weather()` will return a tidy data frame of the current and past 72 hours observations for the requested station.  For a complete listing of the fields in
the data frame see the `Current Weather Fields` vignette.

#### Example

Following is an example fetching the current weather for Melbourne.

```{r, eval=TRUE}
library("bomrang")

Melbourne_weather <- get_current_weather("Melbourne (Olympic Park)")
head(Melbourne_weather)
```

## Meta

* Please [report any issues or bugs](https://github.com/ToowoombaTrio/bomrang/issues).  
* License: MIT  
* To cite _bomrang_, please use:  
  Sparks A, Parsonage H and Pembleton K (2017). _BOMRang: Fetch Australian Government Bureau of Meteorology Weather Data_. doi: 10.5281/zenodo.598301 (URL: http://doi.org/10.5281/zenodo.598301), R package version 0.0.3-3, <URL: https://github.com/ToowoombaTrio/BOMRang>.  
* Please note that this project is released with a [Contributor Code of Conduct](CONDUCT.md). By participating in this project you agree to abide by its terms.  
* BOM Copyright Notice http://reg.bom.gov.au/other/copyright.shtml  

## References

[Australian Bureau of Meteorology (BOM) Weather Data Services](http://www.bom.gov.au/catalogue/data-feeds.shtml)

[Australian Bureau of Meteorology (BOM) Weather Data Services Agriculture Bulletins](http://www.bom.gov.au/catalogue/observations/about-agricultural.shtml)

[Australian Bureau of Meteorology (BOM) Weather Data Services Observation of Rainfall](http://www.bom.gov.au/climate/how/observations/rain-measure.shtml)

